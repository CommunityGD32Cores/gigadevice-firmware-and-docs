#-------------------------------------------------------------------------------
# Copyright (c) 2019, Arm Limited. All rights reserved.
#
# SPDX-License-Identifier: BSD-3-Clause
#
#-------------------------------------------------------------------------------

# Project configuration for cc312 development host project
PROJ_NAME = cc312
TARGET_DIR = cc3x
PROJ_PRD = cc3x
HOST_LIBNAME = cc3x_lib

TEE_OS = no_os
REE_OS = no_os
CORTEX = cortex-m33
ARM_CPU = cortex-m33
M_ARCH=armv8-m.main

PROJ_CFG_NAME = ''
CC_HW_VERSION  =  0xFF
CC_TEE_HW_INC_DIR  =  hw/include/
DLLI_MAX_BUFF_SIZE  =  0x10000
CC_CONFIG_SB_DOUBLE_BUFFER_MAX_SIZE_IN_BYTES  =   8192
CC_CONFIG_MNG_MIN_BACKUP_SIZE_IN_BYTES  =  512
CC_CONFIG_SUPPORT_ECC_SCA_SW_PROTECT  =  0
FW_ENABLE_AES_DRIVER  =  1
CC_CONFIG_SB_INDIRECT_SRAM_ACCESS       =  1
CC_CONFIG_SB_CERT_VERSION_MAJOR         =  1
CC_CONFIG_SB_CERT_VERSION_MINOR         =  0
CC_CONFIG_SB_CC3X =  1

# Mbed-crypto settings
MBEDCRYPTO_ROOT=@MBEDCRYPTO_SOURCE_DIR@
MBEDCRYPTO_ROOT_DIR=@MBEDCRYPTO_SOURCE_DIR@

# Build settings
BUILDDIR=@CC312_BUILD_DIR@
RELEASE_LIBDIR=@CC312_INSTALL_DIR@/lib/
RELEASE_INCDIR=@CC312_INSTALL_DIR@/include/

CFLAGS_EXTRA += -DCRYPTO_HW_ACCELERATOR
CFLAGS_EXTRA += -DHW_ACCELERATOR_CC312
CFLAGS_EXTRA += -DUSE_MBEDTLS_CRYPTOCELL

CFLAGS_EXTRA += -DCC_CONFIG_TRNG_MODE=0
CFLAGS_EXTRA += -DCC_CONFIG_SUPPORT_SRP=1
CFLAGS_EXTRA += -DCC_CONFIG_CC_CHACHA_POLY_SUPPORT=1
CFLAGS_EXTRA += -DCC_CONFIG_SB_X509_CERT_SUPPORTED=1
CFLAGS_EXTRA += -DCC_CONFIG_SUPPORT_EXT_DMA=0
CFLAGS_EXTRA += -DCC_CONFIG_SUPPORT_SB_RT=0

CFLAGS_EXTRA += -DDX_SCC_BASE_ADDR=0x5010B000

CFLAGS_EXTRA += -DMBEDTLS_ECDH_LEGACY_CONTEXT
CFLAGS_EXTRA += -DCC_SRAM_INDIRECT_ACCESS

CFLAGS_EXTRA += -fshort-enums
CFLAGS_EXTRA += -fshort-wchar
CFLAGS_EXTRA += -funsigned-char
CFLAGS_EXTRA += -ffunction-sections
CFLAGS_EXTRA += -fdata-sections
CFLAGS_EXTRA += @CC312_C_FLAGS@

INCDIRS_EXTRA += @CC312_INC_DIR@

TEST_PRODUCT  =  cc3x
PROJ_TARGETS +=  cc3x_lib pal cc3x_productionlib
